var perfKeeperExtFps=function(n){"use strict";var e=Function("return this")(),M=e.document,t=e.performance,y=t&&t.now?function(){return t.now()}:Date.now;function x(n){"complete"===M.readyState?n():e.addEventListener("DOMContentLoaded",n)}var C,r,w=[];var o,a,i,A,l=0,L=0,S=!1,P=!1,k=300;var u="0px";function c(){l=y(),o=e.mozPaintCount||0,a=0,i=-1,r.left=r.left===u?window.innerWidth/2+"px":u,s()}function s(){var n=e.getComputedStyle(C,null),t=n&&n.left?+n.left.slice(0,-2):0;i!==t&&(a++,i=t),L=requestAnimationFrame(s)}function f(){var n=y()-l,t=(e.mozPaintCount||a)-o;cancelAnimationFrame(L),S&&(A(Math.min(Math.round(1e3*t/n),60)),c())}function d(){C||((C=M.createElement("div")).id="FPSMeterHelper",(r=C.style).position="absolute",r.backgroundColor="transparent",r.width="1px",r.height="1px",r.left=u,r.bottom=u,r.transition="left "+k+"ms linear",C.addEventListener("transitionend",f,!1))}function q(){S&&(d(),P=!0,M.body.appendChild(C),setTimeout(c,0))}x(d);var O={rate:300,scrollableName:function(n){return n===document?"page":null},scrollableElement:e};return n.defaultFPSMeterOptions=O,n.fpsMeter=function(p,n){void 0===n&&(n=O);var v,t=n.rate,h=n.scrollableName,e=n.scrollableElement,r=!1,o=0,a=0,i=!1,g=[],l=0,E=0;function u(n){g.push(n)}function c(){i||(i=!0,a=o,setTimeout(s,t))}function s(){i=!1,a===o?(r=!1,b()):c()}function f(){var o,i,l,u,a,n=h?h(v):null,t=(o="pk-fps"+(n?"-"+n:""),i=p,l="fps",a={},[function(n,t,e,r){var o=a;w.concat(n).forEach(function(n){var t=o.nested||(o.nested={});o=t[n]||(t[n]={name:n})}),null!=o.end?o.end+=e-t:(o.start=t,o.end=e,o.unit=r)},function(n,t,e,r){a.name=n?o+"-"+n:o,a.start=t,a.end=e,function t(n,e){var r=n.nested,o=r?Object.keys(r):w;if(o.length){var a=(e||i).group(n.name,n.start);a._=!0,a.unit=l||"ms",(!1===u?o:o.sort()).forEach(function(n){t(r[n],a)}),a.stop(n.end)}else e&&(e.add(n.name,n.start,n.end),e.entries[e.entries.length-1].unit=n.unit||e.unit)}(a,null),r&&(a={})}]),e=t[0],r=t[1],c=g.length,s=Math.floor(c/2),f=0,d=60,m=0;(g=g.sort()).forEach(function(n){d=Math.min(d,n),m=Math.max(m,n),f+=n}),0<c&&(f/=c,e("latency",0,E,"ms"),e("min",0,d),e("max",0,m),e("avg",0,f),e("median",0,c%2?g[s]:(g[s-1]+g[s])/2),r(null,0,f),g.length=0)}function d(){E=y()-l}function m(){var n;l=y(),A=u,(n=t)&&(k=n),S=!0,x(q)}function b(){S&&(S=!1,cancelAnimationFrame(L),P&&M.body.removeChild(C),P=!1),f()}function F(n){var t=n.target;r?v!==t&&(f(),l=y(),requestAnimationFrame(d)):(r=!0,m(),requestAnimationFrame(d)),v=t,o++,c()}return e&&e.addEventListener("scroll",F,!0),{start:m,stop:b,handleScroll:F,destory:function(){e&&e.removeEventListener("scroll",F,!0)}}},n}({});
