var perfKeeperExtFps=function(n){"use strict";var e=Function("return this")(),b=e.document,t=e.performance,F=t&&t.now?function(){return t.now()}:Date.now;function M(n){"complete"===b.readyState?n():e.addEventListener("DOMContentLoaded",n)}var y,r,x=[];var a,o,i,C,l=0,w=0,A=!1,L=300;var u="0px";function c(){l=F(),a=e.mozPaintCount||0,o=0,i=-1,r.left=r.left===u?window.innerWidth/2+"px":u,s()}function s(){var n=e.getComputedStyle(y,null),t=n&&n.left?+n.left.slice(0,-2):0;i!==t&&(o++,i=t),w=requestAnimationFrame(s)}function d(){var n=F()-l,t=(e.mozPaintCount||o)-a;cancelAnimationFrame(w),A&&(C(Math.min(Math.round(1e3*t/n),60)),c())}function f(){y||((y=b.createElement("div")).id="FPSMeterHelper",(r=y.style).position="absolute",r.backgroundColor="transparent",r.width="1px",r.height="1px",r.left=u,r.bottom=u,r.transition="left "+L+"ms linear",y.addEventListener("transitionend",d,!1))}function S(){A&&(f(),b.body.appendChild(y),setTimeout(c,0))}M(f);var P={rate:300,scrollableName:function(n){return n===document?"page":null},scrollableElement:e};return n.defaultFPSMeterOptions=P,n.fpsMeter=function(p,n){void 0===n&&(n=P);var v,r=n.rate,h=n.scrollableName,t=n.scrollableElement,a=!1,o=0,e=0,i=!1,g=[],l=0,E=0;function u(n){g.push(n)}function c(){i||(i=!0,e=o,setTimeout(s,r))}function s(){i=!1,e===o?(a=!1,A&&(A=!1,cancelAnimationFrame(w),y&&b.body.removeChild(y)),d()):c()}function d(){var a,i,l,u,o,n=h?h(v):null,t=(a="pk-fps"+(n?"-"+n:""),i=p,l="fps",o={},[function(n,t,e,r){var a=o;x.concat(n).forEach(function(n){var t=a.nested||(a.nested={});a=t[n]||(t[n]={name:n})}),null!=a.end?a.end+=e-t:(a.start=t,a.end=e,a.unit=r)},function(n,t,e,r){o.name=n?a+"-"+n:a,o.start=t,o.end=e,function t(n,e){var r=n.nested,a=r?Object.keys(r):x;if(a.length){var o=(e||i).group(n.name,n.start);o._=!0,o.unit=l||"ms",(!1===u?a:a.sort()).forEach(function(n){t(r[n],o)}),o.stop(n.end)}else e&&(e.add(n.name,n.start,n.end),e.entries[e.entries.length-1].unit=n.unit||e.unit)}(o,null),r&&(o={})}]),e=t[0],r=t[1],c=g.length,s=Math.floor(c/2),d=0,f=60,m=0;(g=g.sort()).forEach(function(n){f=Math.min(f,n),m=Math.max(m,n),d+=n}),0<c&&(d/=c,e("latency",0,E,"ms"),e("min",0,f),e("max",0,m),e("avg",0,d),e("median",0,c%2?g[s]:(g[s-1]+g[s])/2),r(null,0,d),g.length=0)}function f(){E=F()-l}function m(n){var t,e=n.target;a?v!==e&&(d(),l=F(),requestAnimationFrame(f)):(l=F(),C=u,(t=r)&&(L=t),A=a=!0,M(S),requestAnimationFrame(f)),v=e,o++,c()}return t&&t.addEventListener("scroll",m,!0),{handleScroll:m,destory:function(){t&&t.removeEventListener("scroll",m,!0)}}},n}({});
