var perfKeeperExtFps=function(n){"use strict";var f=Function("return this")(),a=f.document,t=f.performance,m=t&&t.now?function(){return t.now()}:Date.now;function b(n){"complete"===a.readyState?n():f.addEventListener("DOMContentLoaded",n)}var C,e,F=[];var M,i=[],u=0,E=0,l=0,x=!1,y=300;var o="0px";function s(){i.length=0,u=m(),e.left=e.left===o?window.innerWidth/2+"px":o,null!=f.mozPaintCount?l=f.mozPaintCount:r()}function r(){var n=+f.getComputedStyle(C,null).left.slice(0,-2);n&&i.push(n),E=requestAnimationFrame(r)}function c(){var n=m()-u,t=0;if(null!=f.mozPaintCount)t=f.mozPaintCount-l;else{cancelAnimationFrame(E);for(var e=0,a=-1,o=0;o<i.length;o++){var r=i[o];r==a?e++:a=r}t=i.length-e}x&&(M(Math.min(Math.round(1e3*t/n),60)),s())}function d(){C||((C=a.createElement("div")).id="FPSMeterHelper",(e=C.style).position="absolute",e.backgroundColor="transparent",e.width="1px",e.height="1px",e.left=o,e.bottom=o,e.transition="left "+y+"ms linear",C.addEventListener("transitionend",c,!1))}function w(){x&&(d(),a.body.appendChild(C),setTimeout(s,0))}b(d);var P={rate:300,scrollableName:function(n){return n===document?"page":null}};return n.defaultFPSMeterOptions=P,n.fpsMeter=function(d,p){var v;void 0===p&&(p=P);var o=!1,r=0,n=0,t=!1,h=[],i=0,g=0;function u(n){h.push(n)}function l(){t||(t=!0,n=r,setTimeout(e,p.rate))}function e(){t=!1,n===r?(o=!1,x&&(x=!1,cancelAnimationFrame(E),C&&a.body.removeChild(C)),s()):l()}function s(){var o,i,u,r,n=p.scrollableName?p.scrollableName(v):null,t=(o="pk-fps"+(n?"-"+n:""),i=d,u="fps",r={},[function(n,t,e,a){var o=r;F.concat(n).forEach(function(n){var t=o.nested||(o.nested={});o=t[n]||(t[n]={name:n})}),null!=o.end?o.end+=e-t:(o.start=t,o.end=e,o.unit=a)},function(n,t,e,a){r.name=n?o+"-"+n:o,r.start=t,r.end=e,function t(n,e){var a=n.nested,o=a?Object.keys(a):F;if(o.length){var r=(e||i).group(n.name,n.start);r._=!0,r.unit=u||"ms",o.sort().forEach(function(n){t(a[n],r)}),r.stop(n.end)}else e.add(n.name,n.start,n.end),e.entries[e.entries.length-1].unit=n.unit||e.unit}(r,null),a&&(r={})}]),e=t[0],a=t[1],l=h.length,s=Math.floor(l/2),c=0,f=60,m=0;(h=h.sort()).forEach(function(n){f=Math.min(f,n),m=Math.max(m,n),c+=n}),0<l&&(c/=l,e("latency",0,g,"ms"),e("min",0,f),e("max",0,m),e("avg",0,c),e("median",0,l%2?h[s]:(h[s-1]+h[s])/2),a(null,0,c),h.length=0)}function c(){g=m()-i}f.addEventListener("scroll",function(n){var t,e,a=n.target;o?v!==a&&(s(),i=m(),requestAnimationFrame(c)):(i=m(),o=!0,t=u,e=p.rate,M=t,e&&(y=e),x=!0,b(w),requestAnimationFrame(c)),v=a,r++,l()},!0)},n}({});
