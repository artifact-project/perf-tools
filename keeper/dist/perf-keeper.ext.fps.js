var perfKeeperExtFps=function(n){"use strict";var a=Function("return this")(),d=a.document,t=a.performance,f=t&&t.now?function(){return t.now()}:Date.now;function m(n){"complete"===d.readyState?n():a.addEventListener("DOMContentLoaded",n)}var F,e,M=[];var r,o,i,E,u=0,x=0,y=!1,C=300;var l="0px";function c(){u=f(),r=a.mozPaintCount||0,o=0,i=-1,e.left=e.left===l?window.innerWidth/2+"px":l,s()}function s(){var n=+a.getComputedStyle(F,null).left.slice(0,-2);i!==n&&(o++,i=n),x=requestAnimationFrame(s)}function p(){var n=f()-u,t=(a.mozPaintCount||o)-r;cancelAnimationFrame(x),y&&(E(Math.min(Math.round(1e3*t/n),60)),c())}function v(){F||((F=d.createElement("div")).id="FPSMeterHelper",(e=F.style).position="absolute",e.backgroundColor="transparent",e.width="1px",e.height="1px",e.left=l,e.bottom=l,e.transition="left "+C+"ms linear",F.addEventListener("transitionend",p,!1))}function w(){y&&(v(),d.body.appendChild(F),setTimeout(c,0))}m(v);var A={rate:300,scrollableName:function(n){return n===document?"page":null}};return n.defaultFPSMeterOptions=A,n.fpsMeter=function(p,v){var h;void 0===v&&(v=A);var r=!1,o=0,n=0,t=!1,g=[],i=0,b=0;function u(n){g.push(n)}function l(){t||(t=!0,n=o,setTimeout(e,v.rate))}function e(){t=!1,n===o?(r=!1,y&&(y=!1,cancelAnimationFrame(x),F&&d.body.removeChild(F)),c()):l()}function c(){var r,i,u,l,o,n=v.scrollableName?v.scrollableName(h):null,t=(r="pk-fps"+(n?"-"+n:""),i=p,u="fps",o={},[function(n,t,e,a){var r=o;M.concat(n).forEach(function(n){var t=r.nested||(r.nested={});r=t[n]||(t[n]={name:n})}),null!=r.end?r.end+=e-t:(r.start=t,r.end=e,r.unit=a)},function(n,t,e,a){o.name=n?r+"-"+n:r,o.start=t,o.end=e,function t(n,e){var a=n.nested,r=a?Object.keys(a):M;if(r.length){var o=(e||i).group(n.name,n.start);o._=!0,o.unit=u||"ms",(!1===l?r:r.sort()).forEach(function(n){t(a[n],o)}),o.stop(n.end)}else e.add(n.name,n.start,n.end),e.entries[e.entries.length-1].unit=n.unit||e.unit}(o,null),a&&(o={})}]),e=t[0],a=t[1],c=g.length,s=Math.floor(c/2),d=0,f=60,m=0;(g=g.sort()).forEach(function(n){f=Math.min(f,n),m=Math.max(m,n),d+=n}),0<c&&(d/=c,e("latency",0,b,"ms"),e("min",0,f),e("max",0,m),e("avg",0,d),e("median",0,c%2?g[s]:(g[s-1]+g[s])/2),a(null,0,d),g.length=0)}function s(){b=f()-i}a.addEventListener("scroll",function(n){var t,e,a=n.target;r?h!==a&&(c(),i=f(),requestAnimationFrame(s)):(i=f(),r=!0,t=u,e=v.rate,E=t,e&&(C=e),y=!0,m(w),requestAnimationFrame(s)),h=a,o++,l()},!0)},n}({});
