var perfKeeperExtResource=function(e){"use strict";var l="object"==typeof globalThis&&globalThis||"object"==typeof window&&window||"object"==typeof global&&global||{},z=l.document,g=l.performance;g&&g.now||Date.now;var u=[];function S(a,i,c,s){var o={};return[function(e,t,n,r){var a=o;u.concat(e).forEach(function(e){var t=a.nested||(a.nested={});a=t[e]||(t[e]={name:e})}),null!=a.end?a.end+=n-t:(a.start=t,a.end=n,a.unit=r)},function(e,t,n,r){o.name=e?a+"-"+e:a,o.start=t,o.end=n,function t(e,n){var r,a=e.nested,o=a?Object.keys(a):u;o.length?((r=(n||i).group(e.name,e.start,!n))._=!0,r.unit=c||"ms",(!1===s?o:o.sort()).forEach(function(e){t(a[e],r)}),r.stop(e.end)):n&&(n.add(e.name,e.start,e.end),n.entries[n.entries.length-1].unit=e.unit||n.unit)}(o,null),r&&(o={})}]}var b={};return e.defaultResourceStatsOptions=b,e.resourceStats=function(e,t){void 0===t&&(t=b);var n,r=/^https?:\/\/(?:www\.)?(.*?)\.[a-z]+\//,a=6e4,o=S("pk-resource-traffic",e,"KiB"),i=o[0],c=o[1],s=S("pk-resource-traffic-cached",e,"KiB"),u=s[0],d=s[1],f=S("pk-resource-stats",e,"KiB"),h=f[0],m=f[1],y=t.onBeforeEntryAdd,p=t.resourceName||function(e){var t=r.exec(e.name);return t?[e.initiatorType,t[1]]:null},v=t.intervals||[["15sec",15e3],["1min",a],["5min",3e5],["15min",9e5],["30min",18e5],["1hour",36e5],["1day",864e5],["2days",1728e5]];n=function(){var f={size:0,cached:0,cachedSize:0,transfered:0,transferedSize:0,unmeasurable:0,duration:0},n=[],r="start";function l(e,t,n){t&&(e?u:i)(t,0,n)}function a(){var e=g.getEntriesByType("resource");e&&0<e.length&&(n=n.concat(e)),g.clearResourceTimings()}try{!function e(){a(),n.forEach(function(e){var t,n,r,a,o,i,c,s,u,d;y&&!1===y(e)||(t=e.duration,n=e.transferSize,r=e.entryType,a=e.nextHopProtocol,o=e.initiatorType,i=n||e.encodedBodySize||e.decodedBodySize,c=!n,"navigation"===o&&(o="html"),o&&0<i&&((s=[r,o,a]).forEach(function(e){l(c,e,i)}),"html"!==o&&(u=p(e),d=function(e,t,n){(0<t||-1!==s.indexOf(e))&&l(c,n.slice(0,t+1),i)},u&&u.length&&(Array.isArray(u[0])?u.forEach(function(e){e.forEach(d)}):u.forEach(d)))),f.size+=i,f.duration+=t,f[o]=(f[o]||0)+1,c?(f.cached++,f.cachedSize+=i):0<i?(f.transfered++,f.transferedSize+=i):f.unmeasurable++)}),Object.keys(f).forEach(function(e){h(e,0,f[e],"duration"===e?"ms":/size/i.test(e)?"KiB":"raw")}),m(r,0,f.size),0<f.transfered&&c(r,0,f.transferedSize),0<f.cachedSize&&d(r,0,f.cachedSize),n.length=0;var t=v.shift();t&&(r=t[0],setTimeout(e,t[1]))}(),g.onresourcetimingbufferfull=function(){a()}}catch(e){}},"complete"===z.readyState?n():l.addEventListener("DOMContentLoaded",n)},e}({});
