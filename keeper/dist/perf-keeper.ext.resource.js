var perfKeeperExtResource=function(e){"use strict";var d=Function("return this")(),h=d.document,p=d.performance;p&&p.now||Date.now;var u=[];function z(a,c,o,s){var i={};return[function(e,n,t,r){var a=i;u.concat(e).forEach(function(e){var n=a.nested||(a.nested={});a=n[e]||(n[e]={name:e})}),null!=a.end?a.end+=t-n:(a.start=n,a.end=t,a.unit=r)},function(e,n,t,r){i.name=e?a+"-"+e:a,i.start=n,i.end=t,function n(e,t){var r=e.nested,a=r?Object.keys(r):u;if(a.length){var i=(t||c).group(e.name,e.start);i._=!0,i.unit=o||"ms",(!1===s?a:a.sort()).forEach(function(e){n(r[e],i)}),i.stop(e.end)}else t&&(t.add(e.name,e.start,e.end),t.entries[t.entries.length-1].unit=e.unit||t.unit)}(i,null),r&&(i={})}]}var S=/^https?:\/\/(?:www\.)?(.*?)\.[a-z]+\//,E=6e4,g={};return e.defaultResourceStatsOptions=g,e.resourceStats=function(e,n){void 0===n&&(n=g);var t,r=z("pk-resource-traffic",e,"KiB"),i=r[0],c=r[1],a=z("pk-resource-traffic-cached",e,"KiB"),o=a[0],s=a[1],u=z("pk-resource-stats",e,"KiB"),f=u[0],l=u[1],m=n.onBeforeEntryAdd,v=n.resourceName||function(e){var n=S.exec(e.name);return n?[e.initiatorType,n[1]]:null},y=n.intervals||[["15sec",15e3],["1min",E],["5min",3e5],["15min",9e5],["30min",18e5],["1hour",36e5],["1day",864e5],["2days",1728e5]];t=function(){var d={size:0,cached:0,cachedSize:0,transfered:0,transferedSize:0,unmeasurable:0,duration:0},t=[],r="start";function h(e,n,t){n&&(e?o:i)(n,0,t)}function a(){var e=p.getEntriesByType("resource");e&&0<e.length&&(t=t.concat(e)),p.clearResourceTimings()}try{!function e(){a(),t.forEach(function(e){if(!m||!1!==m(e)){var n=e.duration,t=e.transferSize,r=e.entryType,a=e.nextHopProtocol,i=e.initiatorType,c=t||e.encodedBodySize||e.decodedBodySize,o=!t;if("navigation"===i&&(i="html"),i&&0<c){var s=[r,i,a];if(s.forEach(function(e){h(o,e,c)}),"html"!==i){var u=v(e),f=function(e,n,t){(0<n||-1!==s.indexOf(e))&&h(o,t.slice(0,n+1),c)};u&&u.length&&(Array.isArray(u[0])?u.forEach(function(e){e.forEach(f)}):u.forEach(f))}}d.size+=c,d.duration+=n,d[i]=(d[i]||0)+1,o?(d.cached++,d.cachedSize+=c):0<c?(d.transfered++,d.transferedSize+=c):d.unmeasurable++}}),Object.keys(d).forEach(function(e){f(e,0,d[e],"duration"===e?"ms":/size/i.test(e)?"KiB":"raw")}),l(r,0,d.size),0<d.transfered&&c(r,0,d.transferedSize),0<d.cachedSize&&s(r,0,d.cachedSize),t.length=0;var n=y.shift();n&&(r=n[0],setTimeout(e,n[1]))}(),p.onresourcetimingbufferfull=function(){a()}}catch(e){}},"complete"===h.readyState?t():d.addEventListener("DOMContentLoaded",t)},e}({});
