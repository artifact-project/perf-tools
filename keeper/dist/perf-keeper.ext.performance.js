var perfKeeperExtPerformance=function(t){"use strict";var y=Function("return this")(),E=y.document,n=y.performance,b=n&&n.now?function(){return n.now()}:Date.now;var L=[];var g={minLatency:100,ttiDelay:2e3};function k(t,r,a){t.forEach(function(n){var e=function(t){y.removeEventListener(n,e,!0),r(n,t)};(a=a||y).addEventListener(n,e,!0)})}return t.defaultPerformanceOptions=g,t.performanceTimings=function(t,r){void 0===r&&(r=g);var a,o,u,i,e,c,n,s={},f=!1,d=(a="pk-performance",o=t,i={},[function(t,n,e,r){var a=i;L.concat(t).forEach(function(t){var n=a.nested||(a.nested={});a=n[t]||(n[t]={name:t})}),null!=a.end?a.end+=e-n:(a.start=n,a.end=e,a.unit=r)},function(t,n,e,r){i.name=t?a+"-"+t:a,i.start=n,i.end=e,function n(t,e){var r=t.nested,a=r?Object.keys(r):L;if(a.length){var i=(e||o).group(t.name,t.start);i._=!0,i.unit=u||"ms",a.sort().forEach(function(t){n(r[t],i)}),i.stop(t.end)}else e.add(t.name,t.start,t.end),e.entries[e.entries.length-1].unit=t.unit||e.unit}(i,null),r&&(i={})}]),l=d[0],v=d[1],m=["click","touchup","submit","abort","blur","contextmenu","deviceorientation","offline","online","paint","popstate","resize","wheel","scroll"];function p(){Object.keys(s).forEach(function(t){var n=s[t];n.values.forEach(function(t){l(t[0],t[1],t[2])}),v(t,n.start,n.end,!0)}),f=!(s={})}function h(t,n,e,r){void 0===e&&(e=0),void 0===r&&(r=b());var a=s[t]=s[t]||{start:0,end:0,values:[]};a.start=Math.min(a.start,e),a.end=Math.max(a.end,r),a.values.push([n,e,r]),!f&&setTimeout(p),f=!0}k(m,function(t){h("first-"+t,"value")}),k(["beforeunload"],function(){h("tab-unload","value")}),["click","touchup","input","submit","resize","scroll"].forEach(function(n){var e;function t(){var t=b();t-e>=r.minLatency&&(l("value",e,t),v("latency-"+n,e,t,!0))}y.addEventListener(n,function(){e=b(),requestAnimationFrame(t)},!0)});try{(c=new PerformanceObserver(function(t){e=t.getEntries().pop()})).observe({entryTypes:["longtask"]})}catch(t){}n=function(){if(c){var t,n=function(){e?(t=e.startTime+e.duration,b()-t>=r.ttiDelay?(h("tti","value",0,t),c.disconnect()):setTimeout(n,r.ttiDelay)):t?(h("tti","value",0,t),c.disconnect()):(t=b(),setTimeout(n,500))};n()}k(m,function(t){h("first-"+t,"after-ready")})},"complete"===E.readyState?n():y.addEventListener("DOMContentLoaded",n)},t}({});
