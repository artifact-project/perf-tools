var perfKeeperExtPerformance=function(t){"use strict";var w="object"==typeof globalThis&&globalThis||"object"==typeof window&&window||"object"==typeof global&&global||{},L=w.document,e=w.performance,P=e&&e.now?function(){return e.now()}:Date.now;var f=[];function k(r,i,u,c){var a={};return[function(t,e,n,o){var r=a;f.concat(t).forEach(function(t){var e=r.nested||(r.nested={});r=e[t]||(e[t]={name:t})}),null!=r.end?r.end+=n-e:(r.start=e,r.end=n,r.unit=o)},function(t,e,n,o){a.name=t?r+"-"+t:r,a.start=e,a.end=n,function e(t,n){var o,r=t.nested,a=r?Object.keys(r):f;a.length?((o=(n||i).group(t.name,t.start,!n))._=!0,o.unit=u||"ms",(!1===c?a:a.sort()).forEach(function(t){e(r[t],o)}),o.stop(t.end)):n&&(n.add(t.name,t.start,t.end),n.entries[n.entries.length-1].unit=t.unit||n.unit)}(a,null),o&&(a={})}]}var D={minLatency:100,ttiDelay:2e3,prefIdProp:"data-perf-id"};function j(t,o,r){t.forEach(function(e){var n=function(t){w.removeEventListener(e,n,!0),o(e,t)};(r=r||w).addEventListener(e,n,!0)})}return t.defaultPerformanceOptions=D,t.performanceTimings=function(t,n){void 0===n&&(n={});var o,r,e,a={},i=!1,u=!1,c=k("pk-perf",t),f=c[0],s=c[1],d=["click","touchup","submit","abort","blur","contextmenu","deviceorientation","offline","online","paint","popstate","resize","wheel","scroll"],l=n.minLatency,v=void 0===l?D.minLatency:l,p=n.ttiDelay,m=void 0===p?D.ttiDelay:p,y=n.getPerfId,b=void 0===y?function(t,e){for(var n;t&&!n&&1===t.nodeType;)n=t.getAttribute(e),t=t.parentNode;return n}:y;function h(t){return b(t&&1===t.nodeType?t:null,n.prefIdProp||D.prefIdProp)}function g(){Object.keys(a).forEach(function(t){var e=a[t];e.values.forEach(function(t){f(t[0],t[1],t[2])}),s(t,e.start,e.end,!0)}),i=!(a={})}function E(t,e,n,o){void 0===n&&(n=0),void 0===o&&(o=P());var r=a[t]=a[t]||{start:0,end:0,values:[]};r.start=Math.min(r.start,n),r.end=Math.max(r.end,o),r.values.push([e,n,o]),i||setTimeout(g),i=!0}function T(t,e){var n=h(e.target),o="first-"+t+(u?"-ready":"");E(o,"value"),n&&E(o,n)}j(d,T),j(["beforeunload"],function(){E("tab-unload","value")}),["click","touchup","input","submit","resize","scroll"].forEach(function(r){w.addEventListener(r,function(t){var n=t.target,o=P();requestAnimationFrame(function(){var t,e=P();v<=e-o&&(t=h(n),f("value",o,e),t&&f(t,o,e),s("latency-"+r,o,e,!0))})},!0)});try{(r=new PerformanceObserver(function(t){o=t.getEntries().pop()})).observe({entryTypes:["longtask"]})}catch(t){}e=function(){var t,e;u=!0,r&&(e=function(){o?(t=o.startTime+o.duration,P()-t>=m?(E("tti","value",0,t),r.disconnect()):setTimeout(e,n.ttiDelay)):t?(E("tti","value",0,t),r.disconnect()):(t=P(),setTimeout(e,500))})(),j(d,T)},"complete"===L.readyState?e():w.addEventListener("DOMContentLoaded",e)},t}({});
