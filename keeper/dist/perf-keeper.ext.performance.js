var perfKeeperExtPerformance=function(t){"use strict";var E=Function("return this")(),b=E.document,n=E.performance,L=n&&n.now?function(){return n.now()}:Date.now;var g=[];var k={minLatency:100,ttiDelay:2e3};function T(t,r,a){t.forEach(function(n){var e=function(t){E.removeEventListener(n,e,!0),r(n,t)};(a=a||E).addEventListener(n,e,!0)})}return t.defaultPerformanceOptions=k,t.performanceTimings=function(t,r){void 0===r&&(r=k);var a,o,u,c,i,e,s,n,f={},d=!1,l=(a="pk-performance",o=t,i={},[function(t,n,e,r){var a=i;g.concat(t).forEach(function(t){var n=a.nested||(a.nested={});a=n[t]||(n[t]={name:t})}),null!=a.end?a.end+=e-n:(a.start=n,a.end=e,a.unit=r)},function(t,n,e,r){i.name=t?a+"-"+t:a,i.start=n,i.end=e,function n(t,e){var r=t.nested,a=r?Object.keys(r):g;if(a.length){var i=(e||o).group(t.name,t.start);i._=!0,i.unit=u||"ms",(!1===c?a:a.sort()).forEach(function(t){n(r[t],i)}),i.stop(t.end)}else e.add(t.name,t.start,t.end),e.entries[e.entries.length-1].unit=t.unit||e.unit}(i,null),r&&(i={})}]),v=l[0],m=l[1],p=["click","touchup","submit","abort","blur","contextmenu","deviceorientation","offline","online","paint","popstate","resize","wheel","scroll"];function h(){Object.keys(f).forEach(function(t){var n=f[t];n.values.forEach(function(t){v(t[0],t[1],t[2])}),m(t,n.start,n.end,!0)}),d=!(f={})}function y(t,n,e,r){void 0===e&&(e=0),void 0===r&&(r=L());var a=f[t]=f[t]||{start:0,end:0,values:[]};a.start=Math.min(a.start,e),a.end=Math.max(a.end,r),a.values.push([n,e,r]),!d&&setTimeout(h),d=!0}T(p,function(t){y("first-"+t,"value")}),T(["beforeunload"],function(){y("tab-unload","value")}),["click","touchup","input","submit","resize","scroll"].forEach(function(n){var e;function t(){var t=L();t-e>=r.minLatency&&(v("value",e,t),m("latency-"+n,e,t,!0))}E.addEventListener(n,function(){e=L(),requestAnimationFrame(t)},!0)});try{(s=new PerformanceObserver(function(t){e=t.getEntries().pop()})).observe({entryTypes:["longtask"]})}catch(t){}n=function(){if(s){var t,n=function(){e?(t=e.startTime+e.duration,L()-t>=r.ttiDelay?(y("tti","value",0,t),s.disconnect()):setTimeout(n,r.ttiDelay)):t?(y("tti","value",0,t),s.disconnect()):(t=L(),setTimeout(n,500))};n()}T(p,function(t){y("first-"+t,"after-ready")})},"complete"===b.readyState?n():E.addEventListener("DOMContentLoaded",n)},t}({});
