!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.timekeeper={})}(this,function(e){"use strict";var v=null,w="font-weight: bold",g=Function("return this")(),n=g.Date,r=n.now||function(){return(new n).getTime()},t=r(),k=g.console,h=g.performance||{};function x(e){return"color: #"+(e<2?"ccc":e<5?"666":e<10?"333":e<30?"f90":e<60?"f60":"f00")}h.now=h.now||h.webkitNow||h.mozNow||h.msNow||function(){return r()-t},e.create=function(r){function e(e,n){return r[e]==v?n:r[e]}var o=e("perf",h),c=e("prefix","[tk] "),s=e("console",k),i=!!(o.mark&&o.measure&&o.clearMarks&&o.clearMeasures)&&r.timeline,t=[],a={},u=0,f=v,p=!1;function m(e){var n=""+c+e.name;o.measure(n,e.mark),o.clearMarks(e.mark),o.clearMeasures(n)}function n(){!function e(n){for(var r=0,t=0;t<n.length;t++){var o=n[t];if(o.end&&!o.active){var i=o.end-o.start,a=""+c+o.name+": %c"+i.toFixed(3)+"ms";if(o.entries===v||o.entries.length<1)s.log(a,w+";"+x(i)),r+=i;else{s[s.groupCollapsed&&o.entries.length<2?"groupCollapsed":"group"](a,x(i));var u=i-e(o.entries);3<u&&s.log(c+"[[self]]: %c"+u.toFixed(3)+"ms",w+";"+x(u)),r+=i,s.groupEnd()}o.parent===v&&(n.splice(t,1),t--)}}return p=!1,r}(t)}function l(e,n){var r={mark:""+c+e+"-"+ ++u+"-mark",name:e,parent:f,entries:v,active:0,start:o.now(),end:0};return f!==v?(f.active++,f.entries.push(r)):t.push(r),n?(r.entries=[],f=r):(a.hasOwnProperty(e)||(a[e]=[]),a[e].push(r)),i&&o.mark(r.mark),r}function d(e){r.print&&!1===p&&(p=!0,(g.requestAnimationFrame||setTimeout)(n)),e===v||(0<e.active?0==--e.active&&d(e):(e.end=o.now(),i&&m(e),d(e.parent)))}return{entries:t,time:function(e){l(e,!1)},timeEnd:function(e){if(a.hasOwnProperty(e))for(var n=a[e],r=n.length;r--;){var t=n[r];if(0===t.end)return t.end=o.now(),i&&m(t),void d(t.parent)}s.warn('[timekeeper] Timer "'+e+"\" doesn't exist")},group:function(e){l(e,!0).active=1},groupEnd:function(e){var n=f;n!==v?(e!=v&&n.name!==e&&s.warn('[timekeeper] Wrong group "'+e+'" (actual: "'+n.name+'")'),d(n),f=n.parent):s.warn("[timekeeper] No active groups")},wrap:function(r){var t=f;return t.active++,function(){var e=f;f=t;var n=r.apply(this,arguments);return d(t),f=e,n}}}},Object.defineProperty(e,"__esModule",{value:!0})});
