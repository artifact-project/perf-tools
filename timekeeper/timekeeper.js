!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.timekeeper={})}(this,function(e){"use strict";var n=Date.now||function(){return(new Date).getTime()},r=n(),f=Function("return this")(),d=f.console,v=f.performance||{};v.now=v.now||v.webkitNow||v.mozNow||v.msNow||function(){return n()-r},e.create=function(r){var a=null==r.perf?v:r.perf,o=null==r.console?d:r.console,t=!!(a.mark&&a.measure&&a.clearMarks&&a.clearMeasures)&&r.timeline,u=[],i={},s=null,l=!1;function c(){!function e(n){for(var r=0;r<n.length;r++){var t=n[r],a=(t.end-t.start).toFixed(3);t.end&&(null===t.entries?o.log("%c"+t.measure+": %c"+a+"ms","font-weight: bold","color: #060"):(o.group(t.measure+": "+a+"ms"),e(t.entries),o.groupEnd()),null===t.parent&&(n.splice(r,1),r--))}l=!1}(u)}function m(e,n){var r={mark:"[tk] "+e+" 0",measure:"[tk] "+e,name:e,parent:s,entries:null,active:0,start:a.now(),end:0};return null!==s?(s.active++,s.entries.push(r)):u.push(r),n?(r.entries=[],s=r):(i.hasOwnProperty(e)||(i[e]=[]),i[e].push(r)),t&&a.mark(r.mark),r}function p(e,n){r.print&&!1===l&&(l=!0,(f.requestAnimationFrame||setTimeout)(c)),null===e||(0<e.active?n&&0==--e.active&&p(e,!1):(e.end=a.now(),t&&(a.measure(e.measure,e.mark),a.clearMarks(e.mark),a.clearMeasures(e.measure)),p(e.parent,!0)))}return{entries:u,time:function(e){m(e,!1)},timeEnd:function(e){if(i.hasOwnProperty(e))for(var n=i[e],r=n.length;r--;){var t=n[r];if(0===t.end)return t.end=a.now(),void p(t.parent,!0)}o.warn('[timekeeper] Timer "'+e+"\" doesn't exist")},group:function(e,n){var t=m(e,!0);if(null!=n){t.active=1;var r=n(function(e){var n=s;s=t;var r=e();return p(t,!0),s=n,r});return s=t.parent,r}},groupEnd:function(e){var n=s;null!==n?(null!=e&&n.name!==e&&o.warn('[timekeeper] Wrong group "'+e+'" (actual: "'+n.name+'")'),p(n,!1),s=n.parent):o.warn("[timekeeper] No active groups")}}},Object.defineProperty(e,"__esModule",{value:!0})});
